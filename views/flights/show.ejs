<!-- views/flights/show.ejs -->
<%- include('../partials/header') %>

<h2>Flight Details</h2>
<div class="flight-details">
  <h3>Airline: <%= flight.airline %></h3>
  <p><strong>Airport:</strong> <%= flight.airport %></p>
  <p><strong>Flight Number:</strong> <%= flight.flightNo %></p>
  <p><strong>Departs:</strong> <%= flight.departs.toISOString().split('T')[0] %> at <%= flight.departs.toTimeString().split(' ')[0] %></p>
</div>

<!-- Display existing destinations -->
<h4>Destinations:</h4>
<ul>
    <% flight.destinations.forEach(function(destination) { %>
      <li><%= destination.airport %> - Arrives: <%= destination.arrival.toDateString() %></li>
    <% }) %>
  </ul>

<h3>Add Destination</h3>
<form action="/flights/<%= flight._id %>/destinations" method="post">
    <select name="airport">
    <option value="AUS">AUS</option>
    <option value="DFW">DFW</option>
    <option value="DEN">DEN</option>
    <!-- Add other options here -->
  </select>
  <input type="date" name="arrival">
  <button type="submit">Add Destination</button>
</form>

<h3>Tickets</h3>
<ul>
  <% tickets.forEach(function(ticket) { %>
    <li>
      Seat: <%= ticket.seat %>, Price: $<%= ticket.price %>
      <!-- Delete form for each ticket -->
      <form action="/flights/<%= flight._id %>/tickets/<%= ticket._id %>?_method=DELETE" method="post">
        <button type="submit">Delete</button>
      </form>
    </li>
  <% }) %>
</ul>



<h3>Add a New Ticket</h3>
<form action="/flights/<%= flight._id %>/tickets" method="post">
  <div>
    <label for="seat">Seat</label>
    <input type="text" id="seat" name="seat" required pattern="[A-F][1-9]\d?" placeholder="A1">
  </div>
  <div>
    <label for="price">Price</label>
    <input type="number" id="price" name="price" required min="0">
  </div>
  <button type="submit">Add Ticket</button>
</form>


<%- include('../partials/footer') %>
